<html>

<head>
    <title>test send sms</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>

<body>
    <h2>Send SMS</h2>
    <form id="send_sms" name="send_sms" method="post" action="../service/presend.php">

        <!--     
    Phone Number<br/>
    <input type="text" id="number" name="number" value="" /><br/>

    Message<br/>
    <textarea id="message" name="message"></textarea><br/>
    
    ScheduledDelivery<br/>
    <input type="text" id="ScheduledDelivery" name="ScheduledDelivery" value="" /> 
    *  1207011545 (ปีเดือนวันชั่วโมงนาที)<br/>

    <input type="submit" value="Send Now"/> <input type="reset" value="Reset" /> 
    -->

        <table>
            <tr>
                <td>
                    เบอร์โทรศัพท์ :
                </td>
                <td></td>
                <td>
                    <input type="tel" name="phone" id="phone">
                </td>
            </tr>

            <tr>
                <td>
                    เบอร์แบบกลุ่ม :
                </td>
                <td></td>
                <td>
                    <select name="group" id="group">
                        <option value="all">ทั้งหมด</option>
                        <option value="na">NA</option>
                        <option value="tt">TT</option>
                        <option value="ws">WS</option>
                        <option value="new">New Customer ( 1 month )</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td>
                    ข้อความ :
                </td>
                <td></td>
                <td>
                    <textarea name="message" id="message" cols="30" rows="10"></textarea>
                </td>
                <td></td>
                <td>
                    <table>
                        <tr>
                            <div id="status">

                            </div>
                        </tr>
                        <tr>
                            <td>
                                ข้อความ dynamic 1
                            </td>
                            <td>
                                <input type="text" name="rep_str1" id="rep_str1">
                            </td>
                            <td></td>
                            <td>
                                ข้อมูลแทน dynamic 1
                            </td>
                            <td>
                                <select name="rep_feild1" id="rep_feild1">
                                    <option value="1">1</option>
                                </select>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                ข้อความ dynamic 2
                            </td>
                            <td>
                                <input type="text" name="rep_str2" id="rep_str2">
                            </td>
                            <td></td>
                            <td>
                                ข้อมูลแทน dynamic 2
                            </td>
                            <td>
                                <select name="rep_feild2" id="rep_feild2">
                                    <option value="1">1</option>
                                </select>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                ข้อความ dynamic 3
                            </td>
                            <td>
                                <input type="text" name="rep_str3" id="rep_str3">
                            </td>
                            <td></td>
                            <td>
                                ข้อมูลแทน dynamic 3
                            </td>
                            <td>
                                <select name="rep_feild3" id="rep_feild3">
                                    <option value="1">1</option>
                                </select>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>

            <tr>
                <td>
                    รูปแบบการส่ง :
                </td>
                <td></td>
                <td>
                    <select name="type" id="type">
                        <option value="now">ทันที</option>
                        <!-- <option value="template">template</option> -->
                        <!-- <option value="service">service</option> -->
                        <option value="batch_1m">batch_1m</option>
                        <option value="batch_15m">batch_15m</option>
                        <option value="batch_30m">batch_30m</option>
                        <option value="batch_1hr">batch_1hr</option>
                        <option value="batch_3hr">batch_3hr</option>
                        <option value="batch_6hr">batch_6hr</option>
                        <option value="batch_12hr">batch_12hr</option>
                        <option value="batch_day_2400">batch_day_2400</option>
                        <option value="batch_workday_1m">batch_workday_1m</option>
                        <option value="batch_workday_15m">batch_workday_15m</option>
                        <option value="batch_workday_30m">batch_workday_30m</option>
                        <option value="batch_workday_1hr">batch_workday_1hr</option>
                        <option value="batch_workday_3hr">batch_workday_3hr</option>
                        <option value="batch_workday_6hr">batch_workday_6hr</option>
                        <option value="batch_workday_12hr">batch_workday_12hr</option>
                        <option value="batch_workday_2400">batch_workday_2400</option>
                        <option value="batch_weekend_2400">batch_weekend_2400</option>
                        <option value="batch_monthend_2400">batch_monthend_2400</option>
                        <option value="batch_yearend_2400">batch_yearend_2400</option>
                    </select>
                </td>
            </tr>


            <tr>
                <td>
                    ชื่อผู้ส่ง :
                </td>
                <td></td>
                <td>
                    <select name="s_name" id="s_name">
                        <option value="Haadthip">Haadthip</option>
                        <option value="HaadthipPro">HaadthipPro</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <button type="submit">ส่ง</button>
                </td>
            </tr>

        </table>



    </form>




    <script type="text/javascript">

        // $(function () {
        //     var delayID = null;
        //     $("#message").keyup(function (event) {
        //         if (delayID == null) {
        //             delayID = setTimeout(function () {
        //                 var input_data = $("#message").val();
        //                 // alert(input_data);
        //                 show_count(input_data.length);
        //                 delayID = null;
        //             }, 700);
        //         } else {
        //             if (delayID) {
        //                 clearTimeout(delayID);
        //                 delayID = setTimeout(function () {
        //                     var input_data = $("#message").val();
        //                     // alert(input_data);
        //                     show_count(input_data.length);
        //                     delayID = null;
        //                 }, 700);
        //             }
        //         }
        //     });
        // });


        $(function () {
            var delayID = null;
            $("#message").on("keyup", function (event) {
                if (delayID) { clearTimeout(delayID); }
                delayID = setTimeout(function () {
                    var input_data = $("#message").val();
                    show_count(input_data.length); // ทำคำสั่งที่ต้องการ
                    delayID = null;
                }, 3000);
            });
        });

        function show_count(n) {
            document.getElementById("status").innerHTML = n + " / 160";
        }
    </script>


</body>

</html>